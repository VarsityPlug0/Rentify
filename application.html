<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Application - B.G Affordable Housing</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body class="page-template-default page page-id-16">
    <div id="page" class="site">
        <header id="masthead" class="site-header">
            <div class="site-branding">
                <p class="site-title"><a href="index.html" rel="home">B.G Affordable Housing</a></p>
                <p class="site-description">Just another WordPress site</p>
            </div>
            <nav id="site-navigation" class="main-navigation">
                <div class="menu-main-container">
                    <ul id="menu-main" class="menu">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="our-properties.html">Our Properties</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        
        <main id="main" class="site-main">
            <section class="application-hero">
                <h2>Property Application</h2>
                <p>Apply for the property you're interested in</p>
            </section>
            
            <section class="application-content">
                <div class="container">
                    <div class="property-info">
                        <h3 id="property-address">Property Information</h3>
                        <p id="property-details">Loading property information...</p>
                    </div>
                    
                    <div class="application-form">
                        <h3>Application Form</h3>
                        <form id="property-application-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="applicant-name">Full Name *</label>
                                    <input type="text" id="applicant-name" name="applicant-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="applicant-email">Email Address *</label>
                                    <input type="email" id="applicant-email" name="applicant-email" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="applicant-phone">Phone Number *</label>
                                    <input type="tel" id="applicant-phone" name="applicant-phone" required>
                                </div>
                                <div class="form-group">
                                    <label for="applicant-income">Annual Household Income *</label>
                                    <input type="number" id="applicant-income" name="applicant-income" min="0" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="applicant-address">Current Address *</label>
                                <input type="text" id="applicant-address" name="applicant-address" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="applicant-city">City *</label>
                                    <input type="text" id="applicant-city" name="applicant-city" required>
                                </div>
                                <div class="form-group">
                                    <label for="applicant-state">State *</label>
                                    <select id="applicant-state" name="applicant-state" required>
                                        <option value="">Select State</option>
                                        <option value="AL">Alabama</option>
                                        <option value="AK">Alaska</option>
                                        <option value="AZ">Arizona</option>
                                        <option value="AR">Arkansas</option>
                                        <option value="CA">California</option>
                                        <option value="CO">Colorado</option>
                                        <option value="CT">Connecticut</option>
                                        <option value="DE">Delaware</option>
                                        <option value="FL">Florida</option>
                                        <option value="GA">Georgia</option>
                                        <option value="HI">Hawaii</option>
                                        <option value="ID">Idaho</option>
                                        <option value="IL">Illinois</option>
                                        <option value="IN">Indiana</option>
                                        <option value="IA">Iowa</option>
                                        <option value="KS">Kansas</option>
                                        <option value="KY">Kentucky</option>
                                        <option value="LA">Louisiana</option>
                                        <option value="ME">Maine</option>
                                        <option value="MD">Maryland</option>
                                        <option value="MA">Massachusetts</option>
                                        <option value="MI">Michigan</option>
                                        <option value="MN">Minnesota</option>
                                        <option value="MS">Mississippi</option>
                                        <option value="MO">Missouri</option>
                                        <option value="MT">Montana</option>
                                        <option value="NE">Nebraska</option>
                                        <option value="NV">Nevada</option>
                                        <option value="NH">New Hampshire</option>
                                        <option value="NJ">New Jersey</option>
                                        <option value="NM">New Mexico</option>
                                        <option value="NY">New York</option>
                                        <option value="NC">North Carolina</option>
                                        <option value="ND">North Dakota</option>
                                        <option value="OH">Ohio</option>
                                        <option value="OK">Oklahoma</option>
                                        <option value="OR">Oregon</option>
                                        <option value="PA">Pennsylvania</option>
                                        <option value="RI">Rhode Island</option>
                                        <option value="SC">South Carolina</option>
                                        <option value="SD">South Dakota</option>
                                        <option value="TN">Tennessee</option>
                                        <option value="TX">Texas</option>
                                        <option value="UT">Utah</option>
                                        <option value="VT">Vermont</option>
                                        <option value="VA">Virginia</option>
                                        <option value="WA">Washington</option>
                                        <option value="WV">West Virginia</option>
                                        <option value="WI">Wisconsin</option>
                                        <option value="WY">Wyoming</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="applicant-zip">ZIP Code *</label>
                                    <input type="text" id="applicant-zip" name="applicant-zip" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="applicant-occupants">Number of Occupants *</label>
                                <input type="number" id="applicant-occupants" name="applicant-occupants" min="1" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="applicant-employment">Current Employment *</label>
                                <input type="text" id="applicant-employment" name="applicant-employment" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="applicant-message">Additional Information</label>
                                <textarea id="applicant-message" name="applicant-message" rows="4" placeholder="Please provide any additional information you'd like us to know..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="applicant-terms" name="applicant-terms" required>
                                    I agree to the terms and conditions and authorize a background check *
                                </label>
                            </div>
                            
                            <button type="submit" class="btn-submit">Submit Application</button>
                        </form>
                    </div>
                </div>
            </section>
        </main>
        
        <footer id="colophon" class="site-footer">
            <div class="site-info">
                <p>Contact Information:<br>
                Phone: (609)237-5156<br>
                Email: <a href="mailto:Briangorey@zohomail.com">Briangorey@zohomail.com</a><br>
                B.G Affordable Housing</p>
                <a href="index.html">B.G Affordable Housing</a>
                <span class="sep"> | </span>
                <a href="http://wordpress.org/" class="imprint">
                    Proudly powered by WordPress                </a>
            </div><!-- .site-info -->
        </footer><!-- #colophon -->
    </div><!-- #page -->
    
    <script>
        // Get property ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const propertyId = parseInt(urlParams.get('propertyId'));
        
        // Load properties from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const properties = JSON.parse(localStorage.getItem('properties')) || [];
            const property = properties.find(p => p.id === propertyId);
            
            if (property) {
                // Populate property information
                document.getElementById('property-address').textContent = property.address;
                document.getElementById('property-details').innerHTML = `
                    <strong>Price:</strong> ${property.price || 'N/A'}<br>
                    <strong>Bedrooms:</strong> ${property.beds || 'N/A'} | 
                    <strong>Bathrooms:</strong> ${property.baths || 'N/A'} | 
                    <strong>Square Feet:</strong> ${property.sqft || 'N/A'}
                `;
            } else {
                // Property not found
                document.querySelector('.property-info').innerHTML = `
                    <h3>Property Not Found</h3>
                    <p>The property you're trying to apply for doesn't exist or is no longer available.</p>
                    <a href="our-properties.html" class="btn-back">Back to Properties</a>
                `;
                document.querySelector('.application-form').style.display = 'none';
            }
            
            // Handle form submission
            const applicationForm = document.getElementById('property-application-form');
            if (applicationForm) {
                applicationForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Get form data
                    const formData = new FormData(this);
                    const applicationData = {
                        propertyId: propertyId,
                        propertyName: property ? property.address : 'Unknown Property',
                        applicantName: formData.get('applicant-name'),
                        applicantEmail: formData.get('applicant-email'),
                        applicantPhone: formData.get('applicant-phone'),
                        applicantIncome: formData.get('applicant-income'),
                        applicantAddress: formData.get('applicant-address'),
                        applicantCity: formData.get('applicant-city'),
                        applicantState: formData.get('applicant-state'),
                        applicantZip: formData.get('applicant-zip'),
                        applicantOccupants: formData.get('applicant-occupants'),
                        applicantEmployment: formData.get('applicant-employment'),
                        applicantMessage: formData.get('applicant-message'),
                        timestamp: new Date().toISOString()
                    };
                    
                    // Form validation
                    if (!applicationData.applicantName || !applicationData.applicantEmail || 
                        !applicationData.applicantPhone || !applicationData.applicantIncome ||
                        !applicationData.applicantAddress || !applicationData.applicantCity ||
                        !applicationData.applicantState || !applicationData.applicantZip ||
                        !applicationData.applicantOccupants || !applicationData.applicantEmployment) {
                        alert('Please fill in all required fields.');
                        return;
                    }
                    
                    // Email validation
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(applicationData.applicantEmail)) {
                        alert('Please enter a valid email address.');
                        return;
                    }
                    
                    // Get admin email
                    const adminEmail = localStorage.getItem('adminEmail') || 'Briangorey@zohomail.com';
                    
                    // In a real implementation, you would send this data to a server to email the admin
                    // For this demo, we'll just show a success message with the email that would be sent
                    const emailContent = `
                        New Property Application Received:
                        
                        Property: ${applicationData.propertyName} (ID: ${applicationData.propertyId})
                        
                        Applicant Information:
                        Name: ${applicationData.applicantName}
                        Email: ${applicationData.applicantEmail}
                        Phone: ${applicationData.applicantPhone}
                        Annual Income: $${applicationData.applicantIncome}
                        
                        Current Address:
                        ${applicationData.applicantAddress}
                        ${applicationData.applicantCity}, ${applicationData.applicantState} ${applicationData.applicantZip}
                        
                        Household Information:
                        Number of Occupants: ${applicationData.applicantOccupants}
                        Current Employment: ${applicationData.applicantEmployment}
                        
                        Additional Information:
                        ${applicationData.applicantMessage || 'None provided'}
                        
                        Application submitted on: ${applicationData.timestamp}
                    `;
                    
                    // Show success message
                    alert(`Thank you for your application! An email would be sent to ${adminEmail} with your application details.`);
                    
                    // Reset form
                    applicationForm.reset();
                });
            }
        });
    </script>
</body>
</html>